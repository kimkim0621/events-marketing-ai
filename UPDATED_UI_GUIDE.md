# 修正されたデータインポートUI使用ガイド

## 📊 概要

データインポートUIを以下の要求に応じて修正しました：

1. **4つのカテゴリ別データ入力**
2. **2つの入力方式対応**
   - CSVファイル一括インポート
   - WEB UI個別入力

## 🗂️ 4つのデータカテゴリ

### 1. 📋 施策実績データ
カンファレンス集客施策の実績データを管理

**必須項目:**
- 施策名*
- カンファレンス名*
- テーマ・カテゴリ*

**オプション項目:**
- 形式、ターゲット情報、配信数、クリック数、コンバージョン数、費用、CPA

### 2. 👥 参加者属性データ
カンファレンス参加者の属性情報を管理

**必須項目:**
- 職種*
- 業種*

**オプション項目:**
- 役職、企業名、企業規模、関連カンファレンス名

### 3. 💰 有償メディアデータ
有償メディアの基本情報と料金データを管理

**必須項目:**
- メディア名*

**オプション項目:**
- リーチ可能数、ターゲット情報、費用、メディアタイプ、説明、連絡先

### 4. 🧠 知見データ
マーケティング施策に関する知見・ノウハウを管理

**必須項目:**
- タイトル*
- 内容*

**オプション項目:**
- 知見タイプ、影響度、影響範囲、影響頻度、適用条件、タグ、情報源、信頼度

## 🔄 2つの入力方式

### 方式1: CSVファイル一括インポート

#### 特徴
- 大量データの効率的な処理
- 既存データの移行に最適
- CSVテンプレートのダウンロード機能

#### 使用手順
1. 各タブで「CSVファイル一括インポート」を選択
2. 「CSVテンプレートをダウンロード」ボタンでテンプレート取得
3. テンプレートに従ってデータを準備
4. CSVファイルをアップロード
5. 「インポート実行」ボタンでデータ挿入

#### CSVテンプレート例

**施策実績データ:**
```csv
施策名,カンファレンス名,テーマ・カテゴリ,形式,ターゲット(業種),ターゲット(職種),ターゲット(従業員規模),配信数/PV,クリック数,申込(CV数),費用(税抜),CPA
FCメルマガ,AI技術セミナー,AI・機械学習,ハイブリッド,IT・ソフトウェア,エンジニア,すべて,50000,500,50,0,0
```

**参加者属性データ:**
```csv
職種,役職,業種,企業名,従業員規模
エンジニア,シニアエンジニア,IT・ソフトウェア,テック株式会社,101-1000名
```

**有償メディアデータ:**
```csv
メディア名,リーチ可能数,ターゲット業界,ターゲット職種,ターゲット企業規模,費用(税抜),メディアタイプ,説明,連絡先情報
Meta広告,1000000,IT・ソフトウェア,エンジニア,すべて,2000000,Web広告,Facebook・Instagram広告,meta-ads@example.com
```

### 方式2: WEB UI個別入力

#### 特徴
- 直感的な操作性
- 単発データの追加に最適
- リアルタイムバリデーション

#### 使用手順
1. 各タブで「WEB UI個別入力」を選択
2. フォームに必要な情報を入力
3. 「データを追加」ボタンでデータ挿入
4. 自動的にページが更新され、データ概要に反映

#### 特別機能

**知見データ - テキスト形式一括入力:**
- 複数の知見を改行で区切って一括入力
- 共通パラメータ（知見タイプ、影響度等）を一括適用
- 例：
```
FCメルマガは開封率が高く、コンバージョン率も良い
Meta広告は予算をかければリーチ数を増やせる
TechPlayは技術者向けイベントで効果的
```

## 🎯 UI機能詳細

### データ概要表示
- 各カテゴリの登録件数をリアルタイム表示
- データ追加後の自動更新

### エラーハンドリング
- 必須項目の入力チェック
- CSVファイル形式の検証
- データベース挿入エラーの表示

### ユーザビリティ
- プレースホルダーテキストによる入力例示
- 分かりやすいフォーム構成
- 進行状況の表示（スピナー）

## 🚀 起動方法

```bash
# アプリケーション起動
streamlit run data_import_ui.py

# ブラウザで以下URLにアクセス
# http://localhost:8501
```

## 📊 データ管理

### データベース構造
- SQLiteデータベース（`data/events_marketing.db`）
- 4つのテーブル構造
- 自動的なタイムスタンプ管理

### データ整合性
- 重複データの処理（有償メディアデータ）
- 適切なデータ型変換
- エラー時のロールバック

## 🔧 技術仕様

### 使用技術
- **フロントエンド**: Streamlit
- **データベース**: SQLite
- **データ処理**: pandas
- **言語**: Python 3.8+

### 主要機能
- ファイルアップロード処理
- CSV解析・変換
- データベース操作
- リアルタイム更新

## 📈 運用上の注意点

### CSVインポート時
- 文字エンコーディング: UTF-8推奨
- 数値データの金額表記（¥、カンマ）は自動処理
- 空白データは適切にNULL値として処理

### パフォーマンス
- 大量データ処理時の進行状況表示
- エラー発生時の継続処理
- メモリ効率的な処理

## 🆕 新機能

1. **CSVテンプレートダウンロード**: 各カテゴリ用の適切なテンプレート
2. **知見データ一括入力**: テキスト形式での効率的な知見登録
3. **リアルタイム更新**: データ追加後の自動画面更新
4. **エラーハンドリング強化**: 詳細なエラーメッセージ表示

---

**最終更新**: 2025年7月9日
**バージョン**: 2.0.0 